{"version":3,"sources":["src/js/filters.js"],"names":["updateFilters","authorFilter","document","getElementById","categoryFilter","storedBooks","JSON","parse","localStorage","getItem","authors","_toConsumableArray","Set","map","book","author","categories","category","innerHTML","forEach","appendChild","Option","filterAndRenderBooks","priceSort","filteredBooks","value","filter","sort","a","b","price","booksContainer","querySelector","length","bookHtml","bookTemplate","bindBookEventListeners","selectAuthor","addEventListener","selectCategory","selectPrice","window"],"mappings":"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","file":"filters.74dc99af.js","sourceRoot":"..","sourcesContent":["// ==================== filters.js ==================== //\nexport function updateFilters() {\n  const authorFilter = document.getElementById(\"authors-select\");\n  const categoryFilter = document.getElementById(\"category-select\");\n  const storedBooks = JSON.parse(localStorage.getItem(\"books\"));\n\n  // Get unique authors and categories from storedBooks\n  const authors = [...new Set(storedBooks.map((book) => book.author))];\n  const categories = [...new Set(storedBooks.map((book) => book.category))];\n\n  // Clear and repopulate authorFilter\n  authorFilter.innerHTML = `<option value=\"\">All authors</option>`;\n  authors.forEach((author) =>\n    authorFilter.appendChild(new Option(author, author))\n  );\n\n  // Clear and repopulate categoryFilter\n  categoryFilter.innerHTML = `<option value=\"\">All categories</option>`;\n  categories.forEach((category) =>\n    categoryFilter.appendChild(new Option(category, category))\n  );\n}\n\nexport function filterAndRenderBooks() {\n  const authorFilter = document.getElementById(\"authors-select\");\n  const categoryFilter = document.getElementById(\"category-select\");\n  const priceSort = document.getElementById(\"price-select\");\n  const storedBooks = JSON.parse(localStorage.getItem(\"books\"));\n\n  let filteredBooks = storedBooks;\n\n  if (authorFilter !== null && authorFilter.value) {\n    filteredBooks = filteredBooks.filter(\n      (book) => book.author === authorFilter.value\n    );\n  }\n\n  if (categoryFilter !== null && categoryFilter.value) {\n    filteredBooks = filteredBooks.filter(\n      (book) => book.category === categoryFilter.value\n    );\n  }\n\n  if (priceSort !== null && priceSort.value) {\n    filteredBooks.sort((a, b) => {\n      if (priceSort.value === \"min-max\") {\n        return a.price - b.price;\n      } else if (priceSort.value === \"max-min\") {\n        return b.price - a.price;\n      }\n      return 0;\n    });\n  }\n\n  const booksContainer = document.querySelector(\".books-container\");\n\n  if (booksContainer !== null) {\n    if (filteredBooks.length > 0) {\n      booksContainer.innerHTML = \"\";\n      filteredBooks.forEach((book) => {\n        const bookHtml = bookTemplate(book);\n        if (typeof bookHtml === \"string\") {\n          booksContainer.innerHTML += bookHtml;\n        }\n      });\n      bindBookEventListeners();\n    } else {\n      booksContainer.innerHTML = \"<p>No books listed.</p>\";\n    }\n  }\n}\n\n// AUTHOR FILTER\nconst selectAuthor = document.getElementById(\"authors-select\");\nselectAuthor.addEventListener(\"change\", filterAndRenderBooks);\n\n// CATEGORY FILTER\nconst selectCategory = document.getElementById(\"category-select\");\nselectCategory.addEventListener(\"change\", filterAndRenderBooks);\n\n// PRICE SORT\nconst selectPrice = document.getElementById(\"price-select\");\nselectPrice.addEventListener(\"change\", filterAndRenderBooks);\n\nwindow.addEventListener(\"load\", () => {\n  filterAndRenderBooks();\n  updateFilters();\n});\n"]}