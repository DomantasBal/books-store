{"version":3,"sources":["src/js/index.js"],"names":["savedBooks","Book","id","name","author","category","year","price","artwork","addNewBook","event","preventDefault","form","document","getElementById","storedBooks","JSON","parse","localStorage","getItem","booksArray","Array","isArray","book","length","elements","value","parseFloat","updatedBooks","concat","_toConsumableArray","setItem","stringify","reset","location","reload","bookTemplate","bindBookEventListeners","querySelectorAll","forEach","button","addEventListener","editBook","getAttribute","deleteBook","makeFieldsEditable","bookElement","isEditable","field","contentEditable","fieldsColorChange","colorChange","querySelector","_step","_iterator","_createForOfIteratorHelper","s","n","done","style","background","err","e","f","_step2","_iterator2","saveEditedBook","bookId","updatedBook","innerText","slice","bookIndex","findIndex","saveButton","editButton","textContent","display","parseInt","idNumber","Number","splice","alert","filterAndRenderBooks","searchTerm","arguments","undefined","authorFilter","categoryFilter","priceSort","filteredBooks","filter","toLowerCase","includes","sort","a","b","booksContainer","innerHTML","bookHtml","selectAuthor","selectCategory","selectPrice","window","searchForm","handleSearch","trim"],"mappings":";AA6QA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,oBAAA,QAAA,EAAA,OAAA,WAAA,EAAA,cAAA,IAAA,EAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,KAAA,GAAA,GAAA,iBAAA,EAAA,OAAA,CAAA,IAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,KAAA,IAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,WAAA,MAAA,EAAA,cAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EA3QA,IAAIA,EAAa,GAGjB,SAASC,EAAKC,EAAIC,EAAMC,EAAQC,EAAUC,EAAMC,EAAOC,GACrD,KAAKN,GAAKA,EACV,KAAKC,KAAOA,EACZ,KAAKC,OAASA,EACd,KAAKC,SAAWA,EAChB,KAAKC,KAAOA,EACZ,KAAKC,MAAQA,EACb,KAAKC,QAAUA,EAIjB,SAASC,EAAWC,GAClBA,EAAMC,iBACN,IAAMC,EAAOC,SAASC,eAAe,iBAE/BC,EAAcC,KAAKC,MAAMC,aAAaC,QAAQ,WAAa,GAE3DC,EAAaC,MAAMC,QAAQP,GAAeA,EAAc,GAExDQ,EAAO,IAAItB,EACfc,EAAYS,OAAS,EACrBZ,EAAKa,SAAS,GAAGC,MACjBd,EAAKa,SAAS,GAAGC,MACjBd,EAAKa,SAAS,GAAGC,MACjBd,EAAKa,SAAS,GAAGC,MACjBC,WAAWf,EAAKa,SAAS,GAAGC,OAC5Bd,EAAKa,SAAS,GAAGC,OAIbE,EAAYC,GAAAA,OAAAC,EAAOV,GAAYG,CAAAA,IAGrCL,aAAaa,QAAQ,QAASf,KAAKgB,UAAUJ,IAC7ChB,EAAKqB,QACLC,SAASC,SAMX,IAAMvB,EAAOC,SAASC,eAAe,iBAGrC,SAASsB,EAAab,GACpB,MAAAM,qBAAAA,OACgBN,EAAKrB,GAAE2B,uJAAAA,OAGsBN,EAAKpB,KAAI0B,yDAAAA,OACRN,EAAKnB,OAAMyB,yDAAAA,OACVN,EAAKlB,SAAQwB,uDAAAA,OACfN,EAAKjB,KAAIuB,uDAAAA,OACTN,EAAKhB,MAAKsB,qGAAAA,OAGVN,EAAKrB,GAAE2B,kEAAAA,OACPN,EAAKrB,GAAE2B,yFAAAA,OACLN,EAAKrB,GAAE,uDAMxD,SAASmC,IAEaxB,SAASyB,iBAAiB,aAClCC,QAAQ,SAACC,GACnBA,EAAOC,iBAAiB,QAAS,WAE/BC,EADeF,EAAOG,aAAa,qBAMjB9B,SAASyB,iBAAiB,eAClCC,QAAQ,SAACC,GACrBA,EAAOC,iBAAiB,QAAS,WAE/BG,EADeJ,EAAOG,aAAa,qBAQzC,SAASE,EAAmBC,EAAaC,GACvCD,EAAYR,iBAAiB,aAAaC,QAAQ,SAACS,GACjDA,EAAMC,gBAAkBF,IAG1BG,EAAkBJ,EAAaC,GAGjC,SAASG,EAAkBJ,EAAaC,GAEtC,IAMII,EAAc,CANAL,EAAYM,cAAc,sBACxBN,EAAYM,cAAc,wBACxBN,EAAYM,cAAc,yBAC7BN,EAAYM,cAAc,uBAC1BN,EAAYM,cAAc,wBAU7C,GAAIL,EAAY,CAAA,IACeM,EADfC,EAAAC,EACIJ,GAAW,IAA7B,IAAAG,EAAAE,MAAAH,EAAAC,EAAAG,KAAAC,MAA+B,CAAjBL,EAAA3B,MACNiC,MAAMC,WAAa,WAC1BC,MAAAA,GAAAP,EAAAQ,EAAAD,GAAA,QAAAP,EAAAS,SACI,CAAA,IACwBC,EADxBC,EAAAV,EACaJ,GAAW,IAA7B,IAAAc,EAAAT,MAAAQ,EAAAC,EAAAR,KAAAC,MAA+B,CAAjBM,EAAAtC,MACNiC,MAAMC,WAAa,QAC1BC,MAAAA,GAAAI,EAAAH,EAAAD,GAAA,QAAAI,EAAAF,MAIL,SAASG,EAAepB,EAAaqB,GACnC,IAAIC,EAAc,CAChBlE,GAAIiE,EACJhE,KAAM2C,EAAYM,cAAc,sBAAsBiB,UACtDjE,OAAQ0C,EAAYM,cAAc,wBAAwBiB,UAC1DhE,SAAUyC,EAAYM,cAAc,yBAAyBiB,UAC7D/D,KAAMwC,EAAYM,cAAc,uBAAuBiB,UACvD9D,MAAOoB,WACLmB,EAAYM,cAAc,uBAAuBiB,UAAUC,MAAM,GAAI,IAEvE9D,QAAS,IAILO,EAAcC,KAAKC,MAAMC,aAAaC,QAAQ,UAE9CoD,EAAYxD,EAAYyD,UAAU,SAACjD,GAAI,OAAKA,EAAKrB,KAAOiE,IAG9DpD,EAAYwD,GAAaH,EAEzBlD,aAAaa,QAAQ,QAASf,KAAKgB,UAAUjB,IAC7C8B,EAAmBC,GAAa,GAGlC,SAASJ,EAASyB,GAChB,IAAMrB,EAAcjC,SAASC,eAAeqD,GAEtCM,EAAa3B,EAAYM,cAAc,aACvCsB,EAAa5B,EAAYM,cAAc,aAEd,SAA3BsB,EAAWC,aACb9B,EAAmBC,GAAa,GAChC4B,EAAWC,YAAc,SACzBF,EAAWd,MAAMiB,QAAU,iBAE3B/B,EAAmBC,GAAa,GAChC4B,EAAWC,YAAc,OACzBF,EAAWd,MAAMiB,QAAU,QAG7BH,EAAWhC,iBAAiB,QAAS,WACnCyB,EAAepB,EAAa+B,SAASV,IACrCO,EAAWC,YAAc,OACzBF,EAAWd,MAAMiB,QAAU,SAK/B,SAAShC,EAAWuB,GAClB,IAAMpD,EAAcC,KAAKC,MAAMC,aAAaC,QAAQ,UAC9C2D,EAAWC,OAAOZ,GAGlBI,EAAYxD,EAAYyD,UAAU,SAACjD,GAAI,OAAKA,EAAKrB,KAAO4E,KAE3C,IAAfP,GACFxD,EAAYiE,OAAOT,EAAW,GAC9BrD,aAAaa,QAAQ,QAASf,KAAKgB,UAAUjB,KAE7CkE,MAAM,mCAGR/C,SAASC,SAKX,SAAS+C,IAAwC,IAAnBC,EAAUC,UAAA5D,OAAA4D,QAAAC,IAAAD,UAAAC,GAAAD,UAAG,GAAA,KACnCE,EAAezE,SAASC,eAAe,kBACvCyE,EAAiB1E,SAASC,eAAe,mBACzC0E,EAAY3E,SAASC,eAAe,gBAGtC2E,EAFgBzE,KAAKC,MAAMC,aAAaC,QAAQ,UAIjC,OAAfgE,IACFM,EAAgBA,EAAcC,OAAO,SAACnE,GAAI,OACxCA,EAAKpB,KAAKwF,cAAcC,SAAST,MAIhB,OAAjBG,GAAyBA,EAAa5D,QACxC+D,EAAgBA,EAAcC,OAC5B,SAACnE,GAAI,OAAKA,EAAKnB,SAAWkF,EAAa5D,SAIpB,OAAnB6D,GAA2BA,EAAe7D,QAC5C+D,EAAgBA,EAAcC,OAC5B,SAACnE,GAAI,OAAKA,EAAKlB,WAAakF,EAAe7D,SAI7B,OAAd8D,GAAsBA,EAAU9D,OAClC+D,EAAcI,KAAK,SAACC,EAAGC,GACrB,MAAwB,YAApBP,EAAU9D,MACLoE,EAAEvF,MAAQwF,EAAExF,MACU,YAApBiF,EAAU9D,MACZqE,EAAExF,MAAQuF,EAAEvF,MAEd,IAIX,IAAMyF,EAAiBnF,SAASuC,cAAc,oBACvB,OAAnB4C,IACFA,EAAeC,UAAY,GAC3BR,EAAclD,QAAQ,SAAChB,GACrB,IAAM2E,EAAW9D,EAAab,GACN,iBAAb2E,IACTF,EAAeC,WAAaC,KAGhC7D,KAjMJzB,EAAK6B,iBAAiB,SAAUhC,GAsMhC,IAAM0F,EAAetF,SAASC,eAAe,kBAC7CqF,EAAa1D,iBAAiB,SAAUyC,GAGxC,IAAMkB,EAAiBvF,SAASC,eAAe,mBAC/CsF,EAAe3D,iBAAiB,SAAUyC,GAG1C,IAAMmB,EAAcxF,SAASC,eAAe,gBAC5CuF,EAAY5D,iBAAiB,SAAUyC,GAEvCoB,OAAO7D,iBAAiB,OAAQyC,GAIhC,IAAMqB,EAAa1F,SAASC,eAAe,eAG3C,SAAS0F,EAAa9F,GACpBA,EAAMC,iBAINuE,EAHoBrE,SAASC,eAAe,gBACbY,MAAMiE,cAAcc,QALrDF,EAAW9D,iBAAiB,SAAU+D","file":"js.1131309f.js","sourceRoot":"..","sourcesContent":["// ==================== localstorage.js ==================== //\n\nlet savedBooks = [];\n\n// CONSTRUCTOR FUNCTION TO POPULATE BOOK OBJECT WITH FORM DATA\nfunction Book(id, name, author, category, year, price, artwork) {\n  this.id = id;\n  this.name = name;\n  this.author = author;\n  this.category = category;\n  this.year = year;\n  this.price = price;\n  this.artwork = artwork;\n}\n\n// COLLECTS FORM DATA AND CREATES NEW OBJECT\nfunction addNewBook(event) {\n  event.preventDefault();\n  const form = document.getElementById(\"new-book-form\");\n\n  const storedBooks = JSON.parse(localStorage.getItem(\"books\")) || [];\n\n  const booksArray = Array.isArray(storedBooks) ? storedBooks : [];\n\n  const book = new Book(\n    storedBooks.length + 1,\n    form.elements[0].value,\n    form.elements[1].value,\n    form.elements[2].value,\n    form.elements[3].value,\n    parseFloat(form.elements[4].value),\n    form.elements[5].value\n  );\n\n  // APPEND THE NEW BOOK TO THE ARRAY AT LOCALSTORAGE\n  const updatedBooks = [...booksArray, book];\n\n  //   SETS UPDATED BOOKS ARRAY IN LOCALSTORAGE\n  localStorage.setItem(\"books\", JSON.stringify(updatedBooks));\n  form.reset();\n  location.reload();\n}\n\n// ==================== createBookListing.js ==================== //\n\n// FORM SUBMIT EVENT\nconst form = document.getElementById(\"new-book-form\");\nform.addEventListener(\"submit\", addNewBook);\n\nfunction bookTemplate(book) {\n  return `\n    <article id=${book.id} class=\"single-book\">\n    <img src=\"./src/img/book-test.jpg\" alt=\"\" />\n    <div class=\"book-info\">\n      <h3 class=\"single-book__name editable\">${book.name}</h3>\n      <p class=\"single-book__author editable\">${book.author}</p>\n      <p class=\"single-book_category editable\">${book.category}</p>\n      <p class=\"single-book__years editable\">${book.year}</p>\n      <p class=\"single-book__price editable\">${book.price}â‚¬</p>\n    </div>\n    <div class=\"book-controls\">\n      <button class=\"btn edit\" data-book-id=\"${book.id}\">Edit</button>\n      <button class=\"btn save\" data-book-id=\"${book.id}\" style=\"display:none\">Save</button>\n      <button class=\"btn delete\" data-book-id=\"${book.id}\">Delete</button>\n    </div>\n  </article>\n      `;\n}\n\nfunction bindBookEventListeners() {\n  // EDIT BTN FUNC\n  const editButtons = document.querySelectorAll(\".btn.edit\");\n  editButtons.forEach((button) => {\n    button.addEventListener(\"click\", () => {\n      const bookId = button.getAttribute(\"data-book-id\");\n      editBook(bookId);\n    });\n  });\n\n  // DELETE BTN FUNC\n  const deleteButtons = document.querySelectorAll(\".btn.delete\");\n  deleteButtons.forEach((button) => {\n    button.addEventListener(\"click\", () => {\n      const bookId = button.getAttribute(\"data-book-id\");\n      deleteBook(bookId);\n    });\n  });\n}\n\n// ==================== editBook.js ==================== //\n\nfunction makeFieldsEditable(bookElement, isEditable) {\n  bookElement.querySelectorAll(\".editable\").forEach((field) => {\n    field.contentEditable = isEditable;\n  });\n\n  fieldsColorChange(bookElement, isEditable);\n}\n\nfunction fieldsColorChange(bookElement, isEditable) {\n  // Styling on editing\n  const nameField = bookElement.querySelector(\".single-book__name\");\n  const authorField = bookElement.querySelector(\".single-book__author\");\n  const categoryField = bookElement.querySelector(\".single-book_category\");\n  const yearsField = bookElement.querySelector(\".single-book__years\");\n  const priceField = bookElement.querySelector(\".single-book__price\");\n\n  let colorChange = [\n    nameField,\n    authorField,\n    categoryField,\n    yearsField,\n    priceField,\n  ];\n\n  if (isEditable) {\n    for (let color of colorChange) {\n      color.style.background = \"#8AFFFF\";\n    }\n  } else {\n    for (let color of colorChange) {\n      color.style.background = \"none\";\n    }\n  }\n}\n\nfunction saveEditedBook(bookElement, bookId) {\n  let updatedBook = {\n    id: bookId,\n    name: bookElement.querySelector(\".single-book__name\").innerText,\n    author: bookElement.querySelector(\".single-book__author\").innerText,\n    category: bookElement.querySelector(\".single-book_category\").innerText,\n    year: bookElement.querySelector(\".single-book__years\").innerText,\n    price: parseFloat(\n      bookElement.querySelector(\".single-book__price\").innerText.slice(0, -1)\n    ),\n    artwork: \"\",\n  };\n\n  // Retrieve storedBooks from localStorage\n  const storedBooks = JSON.parse(localStorage.getItem(\"books\"));\n  // Find the index of the book to update\n  const bookIndex = storedBooks.findIndex((book) => book.id === bookId);\n\n  // Update the book in the storedBooks array\n  storedBooks[bookIndex] = updatedBook;\n\n  localStorage.setItem(\"books\", JSON.stringify(storedBooks));\n  makeFieldsEditable(bookElement, false);\n}\n\nfunction editBook(bookId) {\n  const bookElement = document.getElementById(bookId);\n\n  const saveButton = bookElement.querySelector(\".btn.save\");\n  const editButton = bookElement.querySelector(\".btn.edit\");\n\n  if (editButton.textContent === \"Edit\") {\n    makeFieldsEditable(bookElement, true);\n    editButton.textContent = \"Cancel\";\n    saveButton.style.display = \"inline-block\";\n  } else {\n    makeFieldsEditable(bookElement, false);\n    editButton.textContent = \"Edit\";\n    saveButton.style.display = \"none\";\n  }\n\n  saveButton.addEventListener(\"click\", () => {\n    saveEditedBook(bookElement, parseInt(bookId));\n    editButton.textContent = \"Edit\";\n    saveButton.style.display = \"none\";\n  });\n}\n\n// ==================== deleteBook.js ==================== //\nfunction deleteBook(bookId) {\n  const storedBooks = JSON.parse(localStorage.getItem(\"books\"));\n  const idNumber = Number(bookId);\n\n  // Find the index of the book to delete\n  const bookIndex = storedBooks.findIndex((book) => book.id === idNumber);\n\n  if (bookIndex !== -1) {\n    storedBooks.splice(bookIndex, 1);\n    localStorage.setItem(\"books\", JSON.stringify(storedBooks));\n  } else {\n    alert(\"book was not found in database.\");\n  }\n\n  location.reload();\n}\n\n// ==================== filters.js ==================== //\n\nfunction filterAndRenderBooks(searchTerm = null) {\n  const authorFilter = document.getElementById(\"authors-select\");\n  const categoryFilter = document.getElementById(\"category-select\");\n  const priceSort = document.getElementById(\"price-select\");\n  const storedBooks = JSON.parse(localStorage.getItem(\"books\"));\n\n  let filteredBooks = storedBooks;\n\n  if (searchTerm !== null) {\n    filteredBooks = filteredBooks.filter((book) =>\n      book.name.toLowerCase().includes(searchTerm)\n    );\n  }\n\n  if (authorFilter !== null && authorFilter.value) {\n    filteredBooks = filteredBooks.filter(\n      (book) => book.author === authorFilter.value\n    );\n  }\n\n  if (categoryFilter !== null && categoryFilter.value) {\n    filteredBooks = filteredBooks.filter(\n      (book) => book.category === categoryFilter.value\n    );\n  }\n\n  if (priceSort !== null && priceSort.value) {\n    filteredBooks.sort((a, b) => {\n      if (priceSort.value === \"min-max\") {\n        return a.price - b.price;\n      } else if (priceSort.value === \"max-min\") {\n        return b.price - a.price;\n      }\n      return 0;\n    });\n  }\n\n  const booksContainer = document.querySelector(\".books-container\");\n  if (booksContainer !== null) {\n    booksContainer.innerHTML = \"\"; // Clear previous content before adding new ones\n    filteredBooks.forEach((book) => {\n      const bookHtml = bookTemplate(book);\n      if (typeof bookHtml === \"string\") {\n        booksContainer.innerHTML += bookHtml;\n      }\n    });\n    bindBookEventListeners();\n  }\n}\n\n// AUTHOR FILTER\nconst selectAuthor = document.getElementById(\"authors-select\");\nselectAuthor.addEventListener(\"change\", filterAndRenderBooks);\n\n// CATEGORY FILTER\nconst selectCategory = document.getElementById(\"category-select\");\nselectCategory.addEventListener(\"change\", filterAndRenderBooks);\n\n// PRICE SORT\nconst selectPrice = document.getElementById(\"price-select\");\nselectPrice.addEventListener(\"change\", filterAndRenderBooks);\n\nwindow.addEventListener(\"load\", filterAndRenderBooks);\n\n// ==================== search.js ==================== //\n\nconst searchForm = document.getElementById(\"search-form\");\nsearchForm.addEventListener(\"submit\", handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  const searchInput = document.getElementById(\"search-input\");\n  const searchTerm = searchInput.value.toLowerCase().trim();\n\n  filterAndRenderBooks(searchTerm);\n}\n"]}